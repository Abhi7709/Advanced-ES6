<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Promises example</title>

</head>

<body>
    <script type="text/javascript">
        let stocks = {
            Fruits: ['strawbwerry', 'grapes', 'banana', 'apple'],
            liquid: ["water", "ice"],
            holder: ["cone", "cup", "stick"],
            toppings: ["choclate", "peanuts"]
        };

        let is_shop_open = true;

        let order = (time, work) => {
            return new Promise((resolve, reject) => {
                if (is_shop_open) {
                    setTimeout(() => { resolve(work()) }, time)
                }
                else {
                    reject(console.log("Shop is closed"))
                }
            })
        }

        order(2000, () => { console.log(`${stocks.Fruits[0]} was selected`) })

            .then(() => {
                return order(1000, () => { console.log(`Machine is started`) })
            })
            .then(() => {
                return order(2000, () => { console.log(`${stocks.liquid[1]} was added`) })
            })
            .then(() => {
                return order(3000, () => { console.log(` ice cream was placed in ${stocks.holder[0]}`) })
            })
            .then(() => {
                return order(1000, () => { console.log(`${stocks.toppings[0]} was addeded`) })
            })
            .then(() => {
                return order(1000, () => { console.log('ice cream served') })
            })
            .catch(() => {
                console.log("customer left")
            })
            .finally(() => {
                console.log("Thank you visit again")
            })





    </script>
</body>

</html>